<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Knee Osteoarthritis Detection</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

/* ================= GLOBAL ================= */

:root{
  --primary:#00c9a7;
  --secondary:#845ec2;
  --bg:#f6f8fc;
  --card:#ffffff;
}

body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(120deg,#eef2ff,#f6eaff);
}

/* ================= SIDEBAR (FIXED VERSION) ================= */

.sidebar{
  position:fixed;
  top:0;
  left:0;
  width:260px;
  height:100vh;

  background:linear-gradient(180deg,var(--secondary),var(--primary));
  color:white;
  padding:25px;

  /* ðŸ”¥ THE IMPORTANT FIX */
  transform: translateX(-100%);
  transition: transform 0.35s ease;

  z-index:1000;
}

.sidebar.show{
  transform: translateX(0);
}

.logo{
  font-size:22px;
  font-weight:bold;
  margin-bottom:30px;
}

.menu{
  padding:12px;
  border-radius:10px;
  margin:8px 0;
  cursor:pointer;
  transition:0.2s;
}

.menu:hover{
  background:rgba(255,255,255,0.2);
}

/* ================= OVERLAY ================= */

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  opacity:0;
  pointer-events:none;
  transition:0.3s;
}

.overlay.show{
  opacity:1;
  pointer-events:auto;
}

/* ================= NAVBAR ================= */

.navbar{
  height:60px;
  background:white;
  display:flex;
  align-items:center;
  padding:0 25px;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}

.hamburger{
  font-size:26px;
  cursor:pointer;
  margin-right:18px;
}

/* ================= MAIN ================= */

.main{
  padding:25px;
}

/* ================= STATS ================= */

.stats{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
  margin-bottom:25px;
}

.stat{
  background:var(--card);
  padding:20px;
  border-radius:14px;
  text-align:center;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  transition:0.2s;
}

.stat:hover{
  transform:translateY(-4px);
}

/* ================= GRID ================= */

.grid{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:25px;
}

/* ================= CARDS ================= */

.card{
  background:var(--card);
  padding:22px;
  border-radius:14px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  animation:fade 0.4s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1}
}

/* ================= FORM ================= */

input,button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ddd;
}

button{
  background:linear-gradient(45deg,var(--primary),var(--secondary));
  color:white;
  font-weight:bold;
  border:none;
  cursor:pointer;
}

/* ================= TABLE ================= */

table{
  width:100%;
  border-collapse:collapse;
}

th{
  background:var(--primary);
  color:white;
}

th,td{
  padding:8px;
  text-align:center;
}

/* ================= DOCTORS ================= */

.doc{
  display:flex;
  align-items:center;
  margin:10px 0;
}

.doc img{
  width:40px;
  border-radius:50%;
  margin-right:10px;
}

.preview{
  width:100%;
  margin-top:10px;
  display:none;
  border-radius:10px;
}

/* ================= RESPONSIVE ================= */

@media(max-width:900px){
  .stats{grid-template-columns:1fr 1fr;}
  .grid{grid-template-columns:1fr;}
}

</style>
</head>



<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <div class="logo"> WellNest</div>
  <div class="menu">Dashboard</div>
  <div class="menu">Patients</div>
  <div class="menu">Doctors</div>
  <div class="menu">Reports</div>
  <div class="menu">Settings</div>
</div>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>


<!-- NAVBAR -->
<div class="navbar">
  <span class="hamburger" onclick="toggleSidebar()">â˜°</span>
  <h3>Knee OA Detection Dashboard</h3>
</div>



<div class="main">

  <!-- STATS -->
  <div class="stats">
    <div class="stat">ðŸ‘¥ Patients<br>965</div>
    <div class="stat">ðŸ“… Appointments<br>128</div>
    <div class="stat">ðŸ“„ Reports<br>54</div>
    <div class="stat">ðŸ’° Revenue<br>$1500</div>
  </div>


  <!-- GRID -->
  <div class="grid">

    <!-- LEFT -->
    <div>

      <div class="card">
        <h3>Upload X-ray & Predict</h3>

        <form id="form">
          <input type="text" name="name" placeholder="Patient Name">
          <input type="number" name="age" placeholder="Age">
          <input type="file" id="img" name="image">
          <img id="preview" class="preview">
          <button>Predict Grade</button>
        </form>

        <h3 id="result"></h3>
      </div>

      <div class="card" style="margin-top:20px;">
        <h3>Grade Distribution</h3>
        <canvas id="chart"></canvas>
      </div>

      <div class="card" style="margin-top:20px;">
        <h3>Patient History</h3>
        <table id="table">
          <thead>
            <tr>
              <th>ID</th><th>Name</th><th>Age</th><th>Grade</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

    </div>


    <!-- RIGHT -->
    <div class="card">
      <h3>Doctors Panel</h3>

      <div class="doc"><img src="https://i.pravatar.cc/40?img=12">Dr. Smith</div>
      <div class="doc"><img src="https://i.pravatar.cc/40?img=22">Dr. Patel</div>
      <div class="doc"><img src="https://i.pravatar.cc/40?img=30">Dr. Ameen</div>

      <hr>

      <p>ðŸ—“ 3 appointments today</p>
      <p>ðŸ§ª 5 scans pending</p>
    </div>

  </div>

</div>



<script>

/* ===== SIDEBAR TOGGLE ===== */
function toggleSidebar(){
  sidebar.classList.toggle("show");
  overlay.classList.toggle("show");
}

/* ===== PREVIEW ===== */
img.onchange = ()=>{
  preview.src = URL.createObjectURL(img.files[0]);
  preview.style.display="block";
}

/* ===== CHART + TABLE ===== */
let chart;

async function load(){
  let res = await fetch("http://127.0.0.1:5000/patients");
  let data = await res.json();

  table.innerHTML="";
  let counts=[0,0,0,0,0];

  data.forEach(p=>{
    table.innerHTML+=`
      <tr>
        <td>${p[0]}</td>
        <td>${p[1]}</td>
        <td>${p[2]}</td>
        <td>${p[3]}</td>
      </tr>`;
    counts[p[3]]++;
  });

  if(chart) chart.destroy();

  chart=new Chart(document.getElementById("chart"),{
    type:"bar",
    data:{labels:["0","1","2","3","4"],
      datasets:[{data:counts,backgroundColor:"#00c9a7"}]}
  });
}

/* ===== PREDICT ===== */
form.onsubmit = async(e)=>{
  e.preventDefault();
  let fd=new FormData(form);

  let res=await fetch("http://127.0.0.1:5000/predict",{method:"POST",body:fd});
  let d=await res.json();

  result.innerHTML="Grade: "+d.grade;
  load();
}

load();

</script>

</body>
</html>
